


ARM Macro Assembler    Page 1 


    1 00000000         ;
    2 00000000         ;                                                  FILE-
                       START
    3 00000000         ;
    4 00000000         ; ÎÄ¼þÃû³Æ: osCPUa.asm
    5 00000000         ;
    6 00000000         ; ÎÄ¼þÄÚÈÝ: ÏµÍ³"CPUÄÚºË²Ù×÷»ã±à"ÎÄ¼þ
    7 00000000         ;
    8 00000000         ; ÎÄ¼þ°æ±¾: 1.0.0
    9 00000000         ;
   10 00000000         ; ÎÄ¼þ×÷Õß: AhDun (mail: ahdunxx@163.com)
   11 00000000         ;
   12 00000000         ; ¿ª·¢»·¾³: STM32F407ZGT6@168MHz & MDK-ARM Version: 5.27
                       .1.0
   13 00000000         ;
   14 00000000         ; ×¢    ÊÍ: ÎÞ
   15 00000000         ;
   16 00000000         ;
   17 00000000         ;
   18 00000000         ;
   19 00000000         ;                                                  <ÉùÃ÷
                       Çø>
   20 00000000         ;
   21 00000000         ; IMPORT  RunTask_TIT
   22 00000000         ; IMPORT  osTaskSwitch
   23 00000000         ;
   24 00000000         ;                                                  <È«¾Ö
                       ±êºÅ>
   25 00000000         ;
   26 00000000         ; EXPORT  PendSV_Handler
   27 00000000                 EXPORT           CPU_PendSV
   28 00000000                 EXPORT           CPU_PendSV_STATE
   29 00000000                 EXPORT           CPU_SVC
   30 00000000                 EXPORT           INTX_DISABLE
   31 00000000                 EXPORT           INTX_ENABLE
   32 00000000         ;
   33 00000000         ;                                                  <³£Á¿
                       ±êºÅ¶¨Òå>
   34 00000000         ;
   35 00000000 E000ED04 
                       NVIC_PendSV
                               EQU              0xE000ED04  ;PendSV¼Ä´æÆ÷µØÖ·  
                                                             
   36 00000000 10000000 
                       NVIC_PendSV_SET
                               EQU              0x10000000  ;PendSV¼Ä´æÆ÷ÄÚºËÐü
                                                            ÆðÊ¹ÄÜÖµ
   37 00000000         ;
   38 00000000         ;
   39 00000000         ;                                                  <´úÂë
                       Çø>
   40 00000000         ;
   41 00000000         
   42 00000000                 PRESERVE8
   43 00000000                 THUMB
   44 00000000         
   45 00000000                 AREA             CODE, CODE, READONLY
   46 00000000         ;PRESERVE8 
   47 00000000         



ARM Macro Assembler    Page 2 


   48 00000000         ;AREA    |.text|, CODE, READONLY
   49 00000000         ;THUMB 
   50 00000000         
   51 00000000         
   52 00000000         CPU_SVC
   53 00000000         
   54 00000000 B662            CPSIE            I           ;Ê¹ÄÜËùÓÐÖÐ¶Ï£¬ÈçÓÐ
                                                            Ã»ÓÐÆôÓÃÖÐ¶Ï½«»á´¥·
                                                            ¢HardFault_Handler
   55 00000002 DF00            SVC              0           ;´¥·¢SVCÐüÆð
   56 00000004 4770            BX               LR          ;ÍË³öº¯Êý£¬Ìø×ªµ½BX
                                                            ¼Ä´æÆ÷ÖÐËù´æµÄµØÖ·
   57 00000006         ;
   58 00000006         ;
   59 00000006         ; º¯ÊýÃû³Æ: CPU_PendSV_STATE
   60 00000006         ;
   61 00000006         ; º¯Êý°æ±¾: 1.0.0
   62 00000006         ;
   63 00000006         ; º¯Êý¹¦ÄÜ: ²éÑ¯ÄÚºËÊÇ·ñÒÑ¾­±»ÐüÆð
   64 00000006         ;
   65 00000006         ; ÊäÈë²ÎÊý: ÎÞ
   66 00000006         ;
   67 00000006         ; Êä³ö²ÎÊý: ÎÞ
   68 00000006         ;
   69 00000006         ; ×¢    ÊÍ: ÎÞ
   70 00000006         ;
   71 00000006         CPU_PendSV_STATE
   72 00000006         
   73 00000006 4C08            LDR              R4,     =NVIC_PendSV ;½«PendSV¼
                                                            Ä´æÆ÷µÄµØÖ·¼ÓÔØµ½R4
                                                            ¼Ä´æÆ÷ÖÐ
   74 00000008 BF00            NOP                          ;¿ÕÖ¸Áî,×÷ÓÃÆÁ±Îwar
                                                            ning: A1581W¾¯¸æ
   75 0000000A 6824            LDR              R4, [R4]    ;½«R4¼Ä´æÆ÷µÄÖµ×öÎª
                                                            Ö¸ÕëÈ¡Öµµ½R4ÖÐ
   76 0000000C F004 5480       AND              R4, R4,#NVIC_PendSV_SET ;½«R4¼Ä
                                                            ´æÆ÷µÄÖµÓë0x1000000
                                                            0½øÐÐÏàÓëÔËËã
   77 00000010 4770            BX               LR          ;Ìø×ªµ½LR¼Ä´æÆ÷ÖÐËù
                                                            Ö¸ÏòµÄÖµ
   78 00000012         ;
   79 00000012         ; º¯ÊýÃû³Æ: CPU_PendSV
   80 00000012         ;
   81 00000012         ; º¯Êý°æ±¾: 1.0.0
   82 00000012         ;
   83 00000012         ; º¯Êý¹¦ÄÜ: Ê¹ÄÚºËPendSVÐüÆð
   84 00000012         ;
   85 00000012         ; ÊäÈë²ÎÊý: ÎÞ
   86 00000012         ;
   87 00000012         ; Êä³ö²ÎÊý: ÎÞ
   88 00000012         ;
   89 00000012         ; ×¢    ÊÍ: ÎÞ
   90 00000012         CPU_PendSV
   91 00000012         
   92 00000012 B503            PUSH             {R0,R1,LR}  ;½ûÓÃËùÓÐÖÐ¶Ï
   93 00000014 4804            LDR              R0,     =NVIC_PendSV ;½«PendSV¼
                                                            Ä´æÆ÷µÄµØÖ·¼ÓÔØµ½R0
                                                            ¼Ä´æÆ÷ÖÐ
   94 00000016 F04F 5180       LDR              R1,     =NVIC_PendSV_SET ;½«Pen



ARM Macro Assembler    Page 3 


                                                            dSV¼Ä´æÆ÷ÄÚºËÐüÆðÊ¹
                                                            ÄÜÖµ¼ÓÔØµ½R1¼Ä´æÆ÷Ö
                                                            Ð
   95 0000001A 6001            STR              R1, [R0]    ;½«PendSV¼Ä´æÆ÷ÄÚºË
                                                            ÐüÆðÊ¹ÄÜÐ´ÈëR0¼Ä´æÆ
                                                            ÷ËùÖ¸ÏòµÄµØÖ·
   96 0000001C BD03            POP              {R0,R1,PC}
   97 0000001E         ;    BX      LR      ;Ìø×ªµ½LR¼Ä´æÆ÷ÖÐËùÖ¸ÏòµÄÖµ
   98 0000001E         
   99 0000001E         INTX_DISABLE
  100 0000001E         
  101 0000001E B672            CPSID            I           ;½ûÓÃËùÓÐÖÐ¶Ï
  102 00000020 4770            BX               LR          ;ÍË³öº¯Êý£¬Ìø×ªµ½BX
                                                            ¼Ä´æÆ÷ÖÐËù´æµÄµØÖ·
  103 00000022         
  104 00000022         INTX_ENABLE
  105 00000022         
  106 00000022 B662            CPSIE            I           ;½ûÓÃËùÓÐÖÐ¶Ï
  107 00000024 4770            BX               LR          ;ÍË³öº¯Êý£¬Ìø×ªµ½BX
                                                            ¼Ä´æÆ÷ÖÐËù´æµÄµØÖ·
  108 00000026         
  109 00000026         
  110 00000026         
  111 00000026         ;PendSV_Handler
  112 00000026         
  113 00000026         
  114 00000026         ; CPSID   I
  115 00000026         ; LDR   R0, =UPTask_TRS
  116 00000026         ; LDR   R0,   [R0]
  117 00000026         ; MOV   R2,   SP
  118 00000026         ; MRS   R3,   PSP
  119 00000026         ; MOV   SP,   R3
  120 00000026         ; TST  LR, #0x10
  121 00000026         ; IT  EQ
  122 00000026         ; VSTMDBEQ SP!,{S16-S31}
  123 00000026         ; PUSH {R4-R11}
  124 00000026         ; STR   SP,   [R0]
  125 00000026         
  126 00000026         ; LDR   R0, =STTask_TRS
  127 00000026         ; LDR   R0, [R0]
  128 00000026         ; LDR   SP,   [R0]
  129 00000026         ; POP  {R4-R11}
  130 00000026         ; TST  LR, #0x10
  131 00000026         ; IT  EQ
  132 00000026         ; VLDMIAEQ SP!, {S16-S31} 
  133 00000026         ; MOV   R1,   SP
  134 00000026         ; MSR   PSP,  R1
  135 00000026         ; ;STR   R1,   [R0]
  136 00000026         ; MOV   SP,   R2
  137 00000026         ; CPSIE   I
  138 00000026         ; BX     LR
  139 00000026 BF00            NOP
  140 00000028                 END
              E000ED04 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M4.fp --apcs=int
erwork --depend=.\objects\oscpu_1.d -o.\objects\oscpu_1.o -I.\RTE\_softos_arm_d
emo -IC:\Keil\ARM\PACK\Keil\STM32F4xx_DFP\2.15.0\Drivers\CMSIS\Device\ST\STM32F
4xx\Include -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\PACK\Keil\STM32F4xx_DFP\2
.15.0\Device\Include --predefine="__MICROLIB SETA 1" --predefine="__UVISION_VER



ARM Macro Assembler    Page 4 


SION SETA 527" --predefine="STM32F407xx SETA 1" --list=.\listings\oscpu.lst ..\
..\..\softos\osCPU.asm



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

CODE 00000000

Symbol: CODE
   Definitions
      At line 45 in file ..\..\..\softos\osCPU.asm
   Uses
      None
Comment: CODE unused
CPU_PendSV 00000012

Symbol: CPU_PendSV
   Definitions
      At line 90 in file ..\..\..\softos\osCPU.asm
   Uses
      At line 27 in file ..\..\..\softos\osCPU.asm
Comment: CPU_PendSV used once
CPU_PendSV_STATE 00000006

Symbol: CPU_PendSV_STATE
   Definitions
      At line 71 in file ..\..\..\softos\osCPU.asm
   Uses
      At line 28 in file ..\..\..\softos\osCPU.asm
Comment: CPU_PendSV_STATE used once
CPU_SVC 00000000

Symbol: CPU_SVC
   Definitions
      At line 52 in file ..\..\..\softos\osCPU.asm
   Uses
      At line 29 in file ..\..\..\softos\osCPU.asm
Comment: CPU_SVC used once
INTX_DISABLE 0000001E

Symbol: INTX_DISABLE
   Definitions
      At line 99 in file ..\..\..\softos\osCPU.asm
   Uses
      At line 30 in file ..\..\..\softos\osCPU.asm
Comment: INTX_DISABLE used once
INTX_ENABLE 00000022

Symbol: INTX_ENABLE
   Definitions
      At line 104 in file ..\..\..\softos\osCPU.asm
   Uses
      At line 31 in file ..\..\..\softos\osCPU.asm
Comment: INTX_ENABLE used once
6 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

NVIC_PendSV E000ED04

Symbol: NVIC_PendSV
   Definitions
      At line 35 in file ..\..\..\softos\osCPU.asm
   Uses
      At line 73 in file ..\..\..\softos\osCPU.asm
      At line 93 in file ..\..\..\softos\osCPU.asm

NVIC_PendSV_SET 10000000

Symbol: NVIC_PendSV_SET
   Definitions
      At line 36 in file ..\..\..\softos\osCPU.asm
   Uses
      At line 76 in file ..\..\..\softos\osCPU.asm
      At line 94 in file ..\..\..\softos\osCPU.asm

2 symbols
344 symbols in table
